# 事务并发执行时遇到的一致性问题

## 脏写（Dirty Write）

如果一个事务修改了另一个未提交事务修改过的数据，就意味着发生了脏写。

## 脏读（Dirty Read）

如果一个事务读到了另一个未提交事务修改过的数据，就意味着发生了脏读。

## 不可重复读（Non-Repeatable Read）

如果一个事务修改了另一个未提交事务读取的数据，就意味着发生了不可重复读。

对于MySQL来说，假设T1先根据搜索条件P读取了一些记录，接着T2删除了一些符合搜索条件P的记录后提交，如果T1再读取符合相同搜索条件的记录时获得了不同的结果集，我们就可以把这种现象认为是结果集中的每一条记录分别发生了不可重复读现象。

## 幻读（Phantom）

如果一个事务先根据某些搜索条件查询出一些记录，在该事物未提交时，另一个事务写入了一些符合那些搜索条件的记录（这里的写入可以指INSERT、DELETE、UPDATE操作），就意味着发生了幻读。

对于MySQL来说，幻读强调的就是一个事务在按照某个相同的搜索条件多次读取记录时，在后读取时读到了之前没有读到的记录，这个“后续取到的之前没有读到的记录”可以是由别的事务执行INSERT语句插入的，也可能是别的事务执行了更新记录键值的UPDATE语句而插入的。

# 数据库持久化原理

redo log来保证数据的持久化。

# 事物的回滚怎么实现？

undo log 用于事务的回滚跟mvcc

# redo log，undo log是所有存储引擎都有的么？

redo log，undo log 是属于innodb，引擎层面的。



# mysql事务的原子性，一致性，持久性，隔离性是怎么实现的？

对于Innodb它主要由俩个事务日志文件redoLog和undoLog来保证事务的原子性，一致性，持久性；隔离性由锁来控制 如间隙锁，排它锁。



# Lock

## 写入数据库的时候会有什么锁？





# 主从复制架构

## 优点

- 数据热备份，高可用
- 可以做读写分离，实现高并发





# 一张表最多可以建多少个索引？

16个。





# 什么是索引下推（ICP）？





